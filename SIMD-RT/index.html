<!DOCTYPE html>
<html lang="en">
<head>

</head>
<body style="background-color: rgba(200, 200, 200, 1.0);">

    <canvas id="canvas" width="256" height="256">
        
    </canvas>

    <script type="module">
        import { push_rays, memory, alloc } from "./build/release.js";
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        
        //
        const iData = ctx.createImageData(canvas.width, canvas.height);
        const _ptr = alloc(canvas.width*canvas.height*4);

        //
        const rays = push_rays(0, 0, canvas.width, canvas.height, _ptr);
        iData.data.set(new Uint8Array(memory.buffer, _ptr, canvas.width*canvas.height*4));

        //
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.putImageData(iData, 0, 0);
    </script>

</body>
</html>
